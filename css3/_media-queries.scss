// define these variables in your main SASS file, if different
$smartphones: 640px !default;
$tablets: 700px !default;
$smallscreen: 1024px !default;

@mixin media($size, $device: screen, $minmax: max-width) {
  @media #{$device} and (#{$minmax}: #{$size}) {
    @content;
  }
}

@mixin min-resolution($value, $suffix: null, $media: "only screen") {
  $valuedpi: 192dpi !default;
  $valuedppx: 2dppx !default;
  $ratio: 2 !default;

  @if unitless($value) or unit($value) == dppx {
    $valuedpi: add-unit(strip-unit($value) * 96, dpi);
    $valuedppx: add-unit(strip-unit($value), dppx);
    $ratio: strip-unit($value);
  } @else {
    @warn "Please use dppx unit in 'min-resolution' mixin!";
  }

  @if $suffix != null {
    @media
    #{unquote($media)} and (-webkit-min-device-pixel-ratio: $ratio) and (#{unquote($suffix)}),
    #{unquote($media)} and (min--moz-device-pixel-ratio: $ratio) and (#{unquote($suffix)}),
    #{unquote($media)} and (-o-min-device-pixel-ratio: #{$ratio}/2) and (#{unquote($suffix)}),
    #{unquote($media)} and (min-device-pixel-ratio: $ratio) and (#{unquote($suffix)}),
    #{unquote($media)} and (min-resolution: $valuedpi) and (#{unquote($suffix)}),
    #{unquote($media)} and (min-resolution: $valuedppx) and (#{unquote($suffix)}){
      @content;
    }
  } @else {
    @media
    #{unquote($media)} and (-webkit-min-device-pixel-ratio: $ratio),
    #{unquote($media)} and (min--moz-device-pixel-ratio: $ratio),
    #{unquote($media)} and (-o-min-device-pixel-ratio: #{$ratio}/2),
    #{unquote($media)} and (min-device-pixel-ratio: $ratio),
    #{unquote($media)} and (min-resolution: $valuedpi),
    #{unquote($media)} and (min-resolution: $valuedppx) {
      @content;
    }
  }
}

// Source: http://37signals.com/svn/posts/3271-easy-retina-ready-images-using-scss
// slightly changed to make single values like "contain" or "cover" possible
@mixin image-2x($image, $size) {
  @media (min--moz-device-pixel-ratio: 1.3),
         (-o-min-device-pixel-ratio: 2.6/2),
         (-webkit-min-device-pixel-ratio: 1.3),
         (min-device-pixel-ratio: 1.3),
         (min-resolution: 1.3dppx) {
    // on retina, use image that's scaled by 2
    background-image: file($image);
    background-size: $size;
  }
}
